// 🔵 Create a basic promise that simulates a successful async task
let simplePromise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("✅ Simple Promise Resolved");
  }, 1000);
});

// Use then() to get the result
simplePromise.then(result => {
  console.log(result);
});

// 🔴 Create a promise that simulates an error
let errorPromise = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject("❌ Promise Rejected");
  }, 1500);
});

// Use catch() to handle errors
errorPromise
  .then(result => {
    console.log(result);
  })
  .catch(error => {
    console.log(error);
  })
  .finally(() => {
    console.log("🟡 Finished errorPromise execution");
  });

// 🔁 Promise chaining – output flows from one then to the next
new Promise((resolve, reject) => {
  resolve(10);
})
  .then(num => {
    console.log("1️⃣ First value:", num);
    return num * 2;
  })
  .then(num => {
    console.log("2️⃣ Second value:", num);
    return num + 5;
  })
  .then(result => {
    console.log("3️⃣ Final Result:", result);
  });

// 🧩 Using Promise.all – runs all and waits for all to complete
let p1 = new Promise(resolve => setTimeout(() => resolve("🍎 Apple"), 1000));
let p2 = new Promise(resolve => setTimeout(() => resolve("🍌 Banana"), 1500));
let p3 = new Promise(resolve => setTimeout(() => resolve("🍇 Grape"), 500));

Promise.all([p1, p2, p3]).then(values => {
  console.log("✅ Promise.all resolved:", values); // All resolved
});

// ⚡ Promise.race – only the fastest wins
Promise.race([p1, p2, p3]).then(fastest => {
  console.log("⚡ Promise.race winner:", fastest); // Grape (500ms)
});

// 🟣 Promise.allSettled – waits for all, regardless of resolve or reject
let p4 = new Promise((_, reject) => setTimeout(() => reject("❌ Failed"), 1200));

Promise.allSettled([p1, p4]).then(results => {
  console.log("🟣 Promise.allSettled:", results);
});

// 🟢 Promise.any – returns first successful result (ignores failures)
let fail1 = new Promise((_, reject) => setTimeout(() => reject("❌ One"), 400));
let pass1 = new Promise(resolve => setTimeout(() => resolve("✅ Passed"), 800));

Promise.any([fail1, pass1]).then(result => {
  console.log("🟢 Promise.any resolved:", result);
});

// 🌙 Async/Await – modern clean syntax to work with promises
async function fetchData() {
  try {
    let value = await new Promise((resolve) =>
      setTimeout(() => resolve("🌐 Async/Await works!"), 1000)
    );
    console.log(value);
  } catch (err) {
    console.log("Caught error:", err);
  } finally {
    console.log("✨ Async function finished");
  }
}

fetchData();
