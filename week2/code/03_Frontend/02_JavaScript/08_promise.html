<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JavaScript Promises Demo</title>
</head>
<body>
  <h1>ğŸ” JavaScript Promise Playground</h1>
  <pre id="output"></pre>

  <script>
    const log = (text) => {
      document.getElementById("output").textContent += text + "\n";
    };

    // âœ… 1. Creating a basic promise
    const simplePromise = new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve("âœ… Simple Promise resolved after 1 second");
      }, 1000);
    });

    simplePromise.then(result => {
      log(result);
    });

    // âŒ 2. Rejected promise with catch and finally
    const rejectedPromise = new Promise((resolve, reject) => {
      setTimeout(() => {
        reject("âŒ Rejected Promise after 1.5 seconds");
      }, 1500);
    });

    rejectedPromise
      .then(res => log(res))
      .catch(err => log(err))
      .finally(() => log("ğŸŸ¡ Finished rejectedPromise"));

    // ğŸ” 3. Promise chaining
    new Promise((resolve) => {
      resolve(5);
    })
    .then((num) => {
      log("1ï¸âƒ£ First value: " + num);
      return num * 2;
    })
    .then((num) => {
      log("2ï¸âƒ£ Second value: " + num);
      return num + 10;
    })
    .then((result) => {
      log("3ï¸âƒ£ Final chained result: " + result);
    });

    // ğŸ“¦ 4. Promise.all â€“ waits for all to resolve
    const p1 = new Promise(resolve => setTimeout(() => resolve("ğŸ Apple"), 1000));
    const p2 = new Promise(resolve => setTimeout(() => resolve("ğŸŒ Banana"), 1500));
    const p3 = new Promise(resolve => setTimeout(() => resolve("ğŸ‡ Grape"), 500));

    Promise.all([p1, p2, p3]).then(values => {
      log("âœ… Promise.all: " + values.join(", "));
    });

    // âš¡ 5. Promise.race â€“ returns first settled result
    Promise.race([p1, p2, p3]).then(value => {
      log("âš¡ Promise.race winner: " + value);
    });

    // ğŸŸ£ 6. Promise.allSettled â€“ waits for all to settle
    const p4 = new Promise((_, reject) => setTimeout(() => reject("ğŸ’¥ Error in p4"), 800));

    Promise.allSettled([p1, p4]).then(results => {
      log("ğŸŸ£ Promise.allSettled:");
      results.forEach(r => log(JSON.stringify(r)));
    });

    // ğŸŸ¢ 7. Promise.any â€“ first successful
    const fail1 = new Promise((_, reject) => setTimeout(() => reject("âŒ Fail 1"), 400));
    const pass1 = new Promise(resolve => setTimeout(() => resolve("âœ… Success!"), 1000));

    Promise.any([fail1, pass1]).then(result => {
      log("ğŸŸ¢ Promise.any: " + result);
    });

    // ğŸŒ™ 8. async/await example with error handling
    async function asyncExample() {
      try {
        log("ğŸŒ™ Starting async/await example...");
        const data = await new Promise((resolve) =>
          setTimeout(() => resolve("ğŸ‰ Async result after 2 sec"), 2000)
        );
        log(data);
      } catch (err) {
        log("âš ï¸ Error in async function: " + err);
      } finally {
        log("âœ¨ Async function complete");
      }
    }

    

    asyncExample();
  </script>
</body>
</html>
